<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>QUITUS Pay - Accueil</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap');
        
        * { 
            font-family: 'DM Sans', sans-serif; 
            -webkit-tap-highlight-color: transparent;
        }
        
        h1, h2, h3, .font-display { 
            font-family: 'Space Grotesk', sans-serif; 
        }
        
        :root {
            --quitus-dark: #1a2e0a;
            --quitus-primary: #2d4a0f;
            --quitus-secondary: #4a7c23;
            --quitus-accent: #7cb342;
            --quitus-light: #e8f5e9;
            --mtn-yellow: #ffcc00;
            --mtn-dark: #004f9f;
            --orange-primary: #ff6600;
            --orange-dark: #e55c00;
        }
        
        .bg-gradient-quitus {
            background: linear-gradient(135deg, var(--quitus-dark) 0%, var(--quitus-primary) 50%, var(--quitus-secondary) 100%);
        }
        
        .bg-gradient-mtn {
            background: linear-gradient(135deg, var(--mtn-dark) 0%, #0066cc 100%);
        }
        
        .bg-gradient-orange {
            background: linear-gradient(135deg, var(--orange-dark) 0%, var(--orange-primary) 100%);
        }
        
        .card-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-shadow {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(0, 0, 0, 0.02);
        }
        
        .balance-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .balance-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }
        
        .nav-item {
            transition: all 0.2s ease;
        }
        
        .nav-item.active {
            color: var(--quitus-primary);
        }
        
        .nav-item.active .nav-icon {
            background: var(--quitus-light);
        }
        
        .action-btn {
            transition: all 0.2s ease;
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        .shimmer {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        .slide-up {
            animation: slideUp 0.4s ease-out;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .support-fab {
            box-shadow: 0 4px 20px rgba(45, 74, 15, 0.4);
            transition: all 0.3s ease;
        }
        
        .support-fab:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 25px rgba(45, 74, 15, 0.5);
        }
        
        .lang-selector {
            position: relative;
        }
        
        .lang-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            overflow: hidden;
            z-index: 100;
            min-width: 140px;
        }
        
        .lang-dropdown.show {
            display: block;
            animation: fadeIn 0.2s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .operator-logo {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 10px;
            color: white;
        }
        
        .scroll-container {
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }
        
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        
        .scroll-item {
            scroll-snap-align: start;
            flex-shrink: 0;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Main Container -->
    <div class="max-w-md mx-auto min-h-screen bg-white shadow-2xl relative pb-24">
        
        <!-- Header -->
        <div class="p-5 slide-up">
            <div class="flex items-center justify-between">
                <!-- Profile -->
                <button onclick="showAccountMenu()" class="flex items-center space-x-3 text-left">
                    <div class="w-12 h-12 bg-gradient-quitus rounded-full flex items-center justify-center text-white font-bold">
                        AM
                    </div>
                    <div>
                        <p class="text-gray-500 text-sm" data-i18n="hello">Bonjour,</p>
                        <p class="font-bold text-gray-800 font-display">Astrid Muriel ðŸ‘‹</p>
                    </div>
                </button>
                
                <!-- Right Actions -->
                <div class="flex items-center space-x-2">
                    <!-- Language Selector -->
                    <div class="lang-selector">
                        <button onclick="toggleLangDropdown()" class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-sm font-medium">
                            <span id="currentLang">FR</span>
                        </button>
                        <div id="langDropdown" class="lang-dropdown">
                            <button onclick="setLanguage('fr')" class="flex items-center space-x-3 w-full px-4 py-3 hover:bg-gray-50 text-left">
                                <span>ðŸ‡«ðŸ‡·</span>
                                <span>FranÃ§ais</span>
                            </button>
                            <button onclick="setLanguage('en')" class="flex items-center space-x-3 w-full px-4 py-3 hover:bg-gray-50 text-left">
                                <span>ðŸ‡¬ðŸ‡§</span>
                                <span>English</span>
                            </button>
                            <button onclick="setLanguage('es')" class="flex items-center space-x-3 w-full px-4 py-3 hover:bg-gray-50 text-left">
                                <span>ðŸ‡ªðŸ‡¸</span>
                                <span>EspaÃ±ol</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Notifications -->
                    <button class="w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center relative">
                        <i class="fas fa-bell text-gray-500"></i>
                        <span class="absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-white text-xs flex items-center justify-center">2</span>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Total Balance Summary -->
        <div class="px-5 mb-4 slide-up" style="animation-delay: 0.1s;">
            <div class="bg-gradient-quitus rounded-2xl p-5 text-white card-shadow">
                <div class="flex items-center justify-between mb-2">
                    <p class="text-white/80 text-sm" data-i18n="totalBalance">Solde Total</p>
                    <button onclick="toggleAllBalances()" class="text-white/60 hover:text-white">
                        <i class="fas fa-eye-slash" id="totalBalanceIcon"></i>
                    </button>
                </div>
                <p class="text-3xl font-bold font-display" id="totalBalance">â€¢â€¢â€¢â€¢â€¢â€¢</p>
                <p class="text-white/60 text-sm mt-1" data-i18n="acrossOperators">Tous opÃ©rateurs confondus</p>
            </div>
        </div>
        
        <!-- Operator Balances -->
        <div class="px-5 mb-6 slide-up" style="animation-delay: 0.2s;">
            <div class="flex items-center justify-between mb-3">
                <h3 class="font-bold text-gray-800 font-display" data-i18n="myWallets">Mes Portefeuilles</h3>
                <button class="text-sm text-green-700 font-medium" data-i18n="addOperator">+ Ajouter</button>
            </div>
            
            <div class="scroll-container flex space-x-3 pb-2">
                <!-- MTN MoMo Card -->
                <div class="scroll-item balance-card bg-gradient-mtn rounded-2xl p-4 text-white min-w-[200px] card-shadow">
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="operator-logo bg-yellow-400 text-blue-900">MTN</div>
                        <div>
                            <p class="font-semibold text-sm">MTN MoMo</p>
                            <p class="text-white/70 text-xs">6XX XXX XXX</p>
                        </div>
                    </div>
                    <p class="text-xl font-bold font-display" id="mtnBalance">â€¢â€¢â€¢â€¢â€¢â€¢</p>
                    <p class="text-white/60 text-xs mt-1">XAF</p>
                </div>
                
                <!-- Orange Money Card -->
                <div class="scroll-item balance-card bg-gradient-orange rounded-2xl p-4 text-white min-w-[200px] card-shadow">
                    <div class="flex items-center space-x-3 mb-3">
                        <div class="operator-logo bg-white text-orange-600">OM</div>
                        <div>
                            <p class="font-semibold text-sm">Orange Money</p>
                            <p class="text-white/70 text-xs">6XX XXX XXX</p>
                        </div>
                    </div>
                    <p class="text-xl font-bold font-display" id="orangeBalance">â€¢â€¢â€¢â€¢â€¢â€¢</p>
                    <p class="text-white/60 text-xs mt-1">XAF</p>
                </div>
                
                <!-- Add More Card -->
                <div class="scroll-item balance-card bg-gray-100 rounded-2xl p-4 min-w-[160px] flex flex-col items-center justify-center border-2 border-dashed border-gray-300">
                    <div class="w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center mb-2">
                        <i class="fas fa-plus text-gray-400"></i>
                    </div>
                    <p class="text-gray-500 text-sm" data-i18n="linkAccount">Lier un compte</p>
                </div>
            </div>
        </div>
        
        <!-- Quick Actions -->
        <div class="px-5 mb-6 slide-up" style="animation-delay: 0.3s;">
            <h3 class="font-bold text-gray-800 font-display mb-4" data-i18n="quickActions">Actions Rapides</h3>
            
            <div class="grid grid-cols-3 gap-3">
                <!-- Send Money -->
                <button onclick="goToTransfer()" class="action-btn bg-white rounded-2xl p-4 card-shadow text-center">
                    <div class="w-14 h-14 bg-green-100 rounded-2xl flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-paper-plane text-green-600 text-xl"></i>
                    </div>
                    <p class="font-semibold text-gray-800 text-sm" data-i18n="send">Envoyer</p>
                </button>
                
                <!-- Pay Bills (Coming Soon) -->
                <button class="action-btn bg-white rounded-2xl p-4 card-shadow text-center opacity-60 relative">
                    <div class="absolute -top-2 -right-2 bg-orange-500 text-white text-xs px-2 py-0.5 rounded-full" data-i18n="soon">BientÃ´t</div>
                    <div class="w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-file-invoice text-blue-600 text-xl"></i>
                    </div>
                    <p class="font-semibold text-gray-800 text-sm" data-i18n="payBills">Factures</p>
                </button>
                
                <!-- Merchant Portal -->
                <button onclick="goToMerchant()" class="action-btn bg-white rounded-2xl p-4 card-shadow text-center">
                    <div class="w-14 h-14 bg-purple-100 rounded-2xl flex items-center justify-center mx-auto mb-3">
                        <i class="fas fa-store text-purple-600 text-xl"></i>
                    </div>
                    <p class="font-semibold text-gray-800 text-sm" data-i18n="merchant">Marchand</p>
                </button>
            </div>
        </div>
        
        <!-- Recent Transactions -->
        <div class="px-5 mb-6 slide-up" style="animation-delay: 0.4s;">
            <div class="flex items-center justify-between mb-4">
                <h3 class="font-bold text-gray-800 font-display" data-i18n="recentTransactions">Transactions RÃ©centes</h3>
                <a href="#" class="text-green-700 text-sm font-medium" data-i18n="viewAll">Tout voir</a>
            </div>
            
            <div class="bg-white rounded-2xl card-shadow overflow-hidden">
                <!-- Transaction 1 -->
                <div class="p-4 flex items-center justify-between border-b border-gray-100">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-red-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-arrow-up text-red-500 text-sm"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-800" data-i18n="transferTo">Transfert Ã  Jean D.</p>
                            <p class="text-xs text-gray-500">20 Dec 2024, 10:30 â€¢ MTN</p>
                        </div>
                    </div>
                    <span class="font-bold text-red-500">-5,000 XAF</span>
                </div>
                
                <!-- Transaction 2 -->
                <div class="p-4 flex items-center justify-between border-b border-gray-100">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-green-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-arrow-down text-green-500 text-sm"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-800" data-i18n="receivedFrom">ReÃ§u de Marie C.</p>
                            <p class="text-xs text-gray-500">19 Dec 2024, 15:45 â€¢ Orange</p>
                        </div>
                    </div>
                    <span class="font-bold text-green-500">+15,000 XAF</span>
                </div>
                
                <!-- Transaction 3 -->
                <div class="p-4 flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center">
                            <i class="fas fa-store text-purple-500 text-sm"></i>
                        </div>
                        <div>
                            <p class="font-medium text-gray-800">Paiement Boutique XYZ</p>
                            <p class="text-xs text-gray-500">18 Dec 2024, 09:00 â€¢ MTN</p>
                        </div>
                    </div>
                    <span class="font-bold text-red-500">-2,500 XAF</span>
                </div>
            </div>
        </div>
        
        <!-- 24/7 Support FAB -->
        <div class="fixed bottom-24 right-4 z-40">
            <button onclick="showSupportModal()" class="support-fab w-14 h-14 bg-gradient-quitus rounded-full flex items-center justify-center text-white">
                <i class="fas fa-headset text-xl"></i>
            </button>
        </div>
        
        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white border-t shadow-lg z-50">
            <div class="flex justify-around py-2">
                <a href="#" class="nav-item active flex flex-col items-center py-2 px-4">
                    <div class="nav-icon w-10 h-10 rounded-xl flex items-center justify-center mb-1">
                        <i class="fas fa-home text-lg"></i>
                    </div>
                    <span class="text-xs font-medium" data-i18n="home">Accueil</span>
                </a>
                <a href="#" class="nav-item flex flex-col items-center py-2 px-4 text-gray-400">
                    <div class="nav-icon w-10 h-10 rounded-xl flex items-center justify-center mb-1">
                        <i class="fas fa-exchange-alt text-lg"></i>
                    </div>
                    <span class="text-xs font-medium" data-i18n="activity">ActivitÃ©s</span>
                </a>
                <a href="quitus_pay_transfer_v2.html" class="nav-item flex flex-col items-center py-2 px-4 text-gray-400">
                    <div class="nav-icon w-10 h-10 rounded-xl flex items-center justify-center mb-1">
                        <i class="fas fa-paper-plane text-lg"></i>
                    </div>
                    <span class="text-xs font-medium" data-i18n="send">Envoyer</span>
                </a>
                <a href="#" class="nav-item flex flex-col items-center py-2 px-4 text-gray-400">
                    <div class="nav-icon w-10 h-10 rounded-xl flex items-center justify-center mb-1">
                        <i class="fas fa-history text-lg"></i>
                    </div>
                    <span class="text-xs font-medium" data-i18n="history">Historique</span>
                </a>
                <a href="quitus_pay_settings_v2.html" class="nav-item flex flex-col items-center py-2 px-4 text-gray-400">
                    <div class="nav-icon w-10 h-10 rounded-xl flex items-center justify-center mb-1">
                        <i class="fas fa-cog text-lg"></i>
                    </div>
                    <span class="text-xs font-medium" data-i18n="settings">ParamÃ¨tres</span>
                </a>
            </div>
        </nav>
    </div>
    
    <!-- Support Modal -->
    <div id="supportModal" class="fixed inset-0 bg-black/50 hidden z-50 items-center justify-center p-4">
        <div class="bg-white rounded-3xl w-full max-w-md overflow-hidden slide-up">
            <div class="bg-gradient-quitus p-6 text-white">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold font-display" data-i18n="support247">Support 24/7</h2>
                    <button onclick="closeSupportModal()" class="text-white/80 hover:text-white">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                <p class="text-white/80 text-sm" data-i18n="supportDesc">Notre Ã©quipe est disponible pour vous aider Ã  tout moment.</p>
            </div>
            
            <div class="p-6 space-y-4">
                <!-- Transaction Issue -->
                <button onclick="openSupportTicket('transaction')" class="w-full flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                    <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-exclamation-triangle text-red-500"></i>
                    </div>
                    <div class="text-left flex-1">
                        <p class="font-semibold text-gray-800" data-i18n="transactionIssue">ProblÃ¨me de transaction</p>
                        <p class="text-sm text-gray-500" data-i18n="transactionIssueDesc">Signaler un Ã©chec ou une erreur</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </button>
                
                <!-- Account Help -->
                <button onclick="openSupportTicket('account')" class="w-full flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-user-circle text-blue-500"></i>
                    </div>
                    <div class="text-left flex-1">
                        <p class="font-semibold text-gray-800" data-i18n="accountHelp">Aide compte</p>
                        <p class="text-sm text-gray-500" data-i18n="accountHelpDesc">ProblÃ¨mes de connexion ou de compte</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </button>
                
                <!-- General Question -->
                <button onclick="openSupportTicket('general')" class="w-full flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors">
                    <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                        <i class="fas fa-question-circle text-green-500"></i>
                    </div>
                    <div class="text-left flex-1">
                        <p class="font-semibold text-gray-800" data-i18n="generalQuestion">Question gÃ©nÃ©rale</p>
                        <p class="text-sm text-gray-500" data-i18n="generalQuestionDesc">Autres demandes d'assistance</p>
                    </div>
                    <i class="fas fa-chevron-right text-gray-400"></i>
                </button>
                
                <!-- Direct Contact -->
                <div class="pt-4 border-t">
                    <p class="text-sm text-gray-500 mb-3 text-center" data-i18n="orContactUs">Ou contactez-nous directement</p>
                    <div class="flex space-x-3">
                        <a href="tel:+237600000000" class="flex-1 py-3 bg-gray-100 rounded-xl text-center font-medium text-gray-700">
                            <i class="fas fa-phone mr-2"></i>
                            <span data-i18n="call">Appeler</span>
                        </a>
                        <a href="https://wa.me/237600000000" class="flex-1 py-3 bg-green-500 rounded-xl text-center font-medium text-white">
                            <i class="fab fa-whatsapp mr-2"></i>
                            WhatsApp
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Support Ticket Modal -->
    <div id="ticketModal" class="fixed inset-0 bg-black/50 hidden z-50 items-center justify-center p-4">
        <div class="bg-white rounded-3xl w-full max-w-md overflow-hidden slide-up">
            <div class="p-6 border-b">
                <div class="flex items-center justify-between">
                    <h2 class="text-xl font-bold font-display" data-i18n="newRequest">Nouvelle demande</h2>
                    <button onclick="closeTicketModal()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
            </div>
            
            <div class="p-6">
                <form onsubmit="submitTicket(event)">
                    <!-- Transaction Reference (for transaction issues) -->
                    <div id="txnRefField" class="mb-4 hidden">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="transactionRef">RÃ©fÃ©rence de transaction</label>
                        <input type="text" id="txnRef" placeholder="QPS-XXXX-XXXX" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none">
                    </div>
                    
                    <!-- Subject -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="subject">Sujet</label>
                        <input type="text" id="ticketSubject" required placeholder="" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none" data-i18n-placeholder="subjectPlaceholder">
                    </div>
                    
                    <!-- Description -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2" data-i18n="description">Description</label>
                        <textarea id="ticketDesc" rows="4" required placeholder="" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-green-500 focus:outline-none resize-none" data-i18n-placeholder="descriptionPlaceholder"></textarea>
                    </div>
                    
                    <button type="submit" class="w-full py-4 bg-gradient-quitus text-white rounded-xl font-semibold">
                        <span data-i18n="sendRequest">Envoyer la demande</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script>
        // ==================== i18n Translations ====================
        const translations = {
            fr: {
                hello: "Bonjour,",
                totalBalance: "Solde Total",
                acrossOperators: "Tous opÃ©rateurs confondus",
                myWallets: "Mes Portefeuilles",
                addOperator: "+ Ajouter",
                linkAccount: "Lier un compte",
                quickActions: "Actions Rapides",
                send: "Envoyer",
                payBills: "Factures",
                merchant: "Marchand",
                soon: "BientÃ´t",
                recentTransactions: "Transactions RÃ©centes",
                viewAll: "Tout voir",
                transferTo: "Transfert Ã ",
                receivedFrom: "ReÃ§u de",
                home: "Accueil",
                activity: "ActivitÃ©s",
                history: "Historique",
                settings: "ParamÃ¨tres",
                support247: "Support 24/7",
                supportDesc: "Notre Ã©quipe est disponible pour vous aider Ã  tout moment.",
                transactionIssue: "ProblÃ¨me de transaction",
                transactionIssueDesc: "Signaler un Ã©chec ou une erreur",
                accountHelp: "Aide compte",
                accountHelpDesc: "ProblÃ¨mes de connexion ou de compte",
                generalQuestion: "Question gÃ©nÃ©rale",
                generalQuestionDesc: "Autres demandes d'assistance",
                orContactUs: "Ou contactez-nous directement",
                call: "Appeler",
                newRequest: "Nouvelle demande",
                transactionRef: "RÃ©fÃ©rence de transaction",
                subject: "Sujet",
                subjectPlaceholder: "DÃ©crivez briÃ¨vement votre problÃ¨me",
                description: "Description",
                descriptionPlaceholder: "Donnez-nous plus de dÃ©tails sur votre demande...",
                sendRequest: "Envoyer la demande"
            },
            en: {
                hello: "Hello,",
                totalBalance: "Total Balance",
                acrossOperators: "Across all operators",
                myWallets: "My Wallets",
                addOperator: "+ Add",
                linkAccount: "Link account",
                quickActions: "Quick Actions",
                send: "Send",
                payBills: "Bills",
                merchant: "Merchant",
                soon: "Soon",
                recentTransactions: "Recent Transactions",
                viewAll: "View all",
                transferTo: "Transfer to",
                receivedFrom: "Received from",
                home: "Home",
                activity: "Activity",
                history: "History",
                settings: "Settings",
                support247: "24/7 Support",
                supportDesc: "Our team is available to help you at any time.",
                transactionIssue: "Transaction issue",
                transactionIssueDesc: "Report a failure or error",
                accountHelp: "Account help",
                accountHelpDesc: "Login or account problems",
                generalQuestion: "General question",
                generalQuestionDesc: "Other support requests",
                orContactUs: "Or contact us directly",
                call: "Call",
                newRequest: "New request",
                transactionRef: "Transaction reference",
                subject: "Subject",
                subjectPlaceholder: "Briefly describe your issue",
                description: "Description",
                descriptionPlaceholder: "Give us more details about your request...",
                sendRequest: "Send request"
            },
            es: {
                hello: "Hola,",
                totalBalance: "Saldo Total",
                acrossOperators: "Todos los operadores",
                myWallets: "Mis Billeteras",
                addOperator: "+ AÃ±adir",
                linkAccount: "Vincular cuenta",
                quickActions: "Acciones RÃ¡pidas",
                send: "Enviar",
                payBills: "Facturas",
                merchant: "Comerciante",
                soon: "Pronto",
                recentTransactions: "Transacciones Recientes",
                viewAll: "Ver todo",
                transferTo: "Transferencia a",
                receivedFrom: "Recibido de",
                home: "Inicio",
                activity: "Actividad",
                history: "Historial",
                settings: "Ajustes",
                support247: "Soporte 24/7",
                supportDesc: "Nuestro equipo estÃ¡ disponible para ayudarte en cualquier momento.",
                transactionIssue: "Problema de transacciÃ³n",
                transactionIssueDesc: "Reportar un fallo o error",
                accountHelp: "Ayuda de cuenta",
                accountHelpDesc: "Problemas de inicio de sesiÃ³n o cuenta",
                generalQuestion: "Pregunta general",
                generalQuestionDesc: "Otras solicitudes de soporte",
                orContactUs: "O contÃ¡ctanos directamente",
                call: "Llamar",
                newRequest: "Nueva solicitud",
                transactionRef: "Referencia de transacciÃ³n",
                subject: "Asunto",
                subjectPlaceholder: "Describe brevemente tu problema",
                description: "DescripciÃ³n",
                descriptionPlaceholder: "Danos mÃ¡s detalles sobre tu solicitud...",
                sendRequest: "Enviar solicitud"
            }
        };
        
        let currentLanguage = localStorage.getItem('quitusLang') || 'fr';
        
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('quitusLang', lang);
            document.getElementById('currentLang').textContent = lang.toUpperCase();
            applyTranslations();
            toggleLangDropdown();
        }
        
        function applyTranslations() {
            const t = translations[currentLanguage];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) {
                    el.textContent = t[key];
                }
            });
            document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
                const key = el.getAttribute('data-i18n-placeholder');
                if (t[key]) {
                    el.placeholder = t[key];
                }
            });
        }
        
        function toggleLangDropdown() {
            const dropdown = document.getElementById('langDropdown');
            dropdown.classList.toggle('show');
        }
        
        // Close dropdown when clicking outside
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.lang-selector')) {
                document.getElementById('langDropdown').classList.remove('show');
            }
        });
        
        // ==================== Balance Management ====================
        let balancesVisible = false;
        const balances = {
            total: '430,000 XAF',
            mtn: '250,000 XAF',
            orange: '180,000 XAF'
        };
        
        function toggleAllBalances() {
            balancesVisible = !balancesVisible;
            const icon = document.getElementById('totalBalanceIcon');
            
            if (balancesVisible) {
                document.getElementById('totalBalance').textContent = balances.total;
                document.getElementById('mtnBalance').textContent = balances.mtn;
                document.getElementById('orangeBalance').textContent = balances.orange;
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            } else {
                document.getElementById('totalBalance').textContent = 'â€¢â€¢â€¢â€¢â€¢â€¢';
                document.getElementById('mtnBalance').textContent = 'â€¢â€¢â€¢â€¢â€¢â€¢';
                document.getElementById('orangeBalance').textContent = 'â€¢â€¢â€¢â€¢â€¢â€¢';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            }
        }
        
        // ==================== Navigation ====================
        function goToTransfer() {
            window.location.href = 'quitus_pay_transfer_v2.html';
        }
        
        function goToMerchant() {
            window.location.href = 'quitus_pay_merchant_v2.html';
        }
        
        function showAccountMenu() {
            // TODO: Implement account menu
            alert('Account menu coming soon');
        }
        
        // ==================== Support Modal ====================
        let currentTicketType = 'general';
        
        function showSupportModal() {
            document.getElementById('supportModal').classList.remove('hidden');
            document.getElementById('supportModal').classList.add('flex');
        }
        
        function closeSupportModal() {
            document.getElementById('supportModal').classList.add('hidden');
            document.getElementById('supportModal').classList.remove('flex');
        }
        
        function openSupportTicket(type) {
            currentTicketType = type;
            closeSupportModal();
            
            // Show/hide transaction reference field
            const txnRefField = document.getElementById('txnRefField');
            if (type === 'transaction') {
                txnRefField.classList.remove('hidden');
            } else {
                txnRefField.classList.add('hidden');
            }
            
            document.getElementById('ticketModal').classList.remove('hidden');
            document.getElementById('ticketModal').classList.add('flex');
        }
        
        function closeTicketModal() {
            document.getElementById('ticketModal').classList.add('hidden');
            document.getElementById('ticketModal').classList.remove('flex');
        }
        
        function submitTicket(e) {
            e.preventDefault();
            const subject = document.getElementById('ticketSubject').value;
            const desc = document.getElementById('ticketDesc').value;
            const txnRef = document.getElementById('txnRef')?.value || '';
            
            // TODO: Send to backend API
            console.log('Ticket submitted:', { type: currentTicketType, subject, desc, txnRef });
            
            alert('Votre demande a Ã©tÃ© envoyÃ©e. Notre Ã©quipe vous contactera bientÃ´t.');
            closeTicketModal();
            
            // Reset form
            document.getElementById('ticketSubject').value = '';
            document.getElementById('ticketDesc').value = '';
            if (document.getElementById('txnRef')) {
                document.getElementById('txnRef').value = '';
            }
        }
        
        // ==================== Initialize ====================
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentLang').textContent = currentLanguage.toUpperCase();
            applyTranslations();
        });
    </script>
</body>
</html>
